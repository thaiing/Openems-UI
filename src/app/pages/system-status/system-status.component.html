<div class="page-container">
  <div class="page-header">
    <h1>System Status</h1>
  </div>

  <div *ngIf="isLoading" class="loading-state">
    <mat-spinner diameter="50"></mat-spinner>
    <p>Loading system status...</p>
  </div>

  <div *ngIf="!isLoading" class="status-grid">
    <mat-card class="info-card">
      <mat-card-header>
        <mat-icon mat-card-avatar>info_outline</mat-icon>
        <mat-card-title>System Information</mat-card-title>
        <mat-card-subtitle>Thông tin chung của thiết bị</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div class="info-row">
          <span class="info-label">Serial Number:</span>
          <span class="info-value">{{ serialNumber }}</span>
        </div>
        <div class="info-row" *ngIf="activeTier">
          <span class="info-label">Gói Cấu Hình:</span>
          <span class="info-value">{{ activeTier.maxInverters }} Inverters / {{ activeTier.maxTotalPowerKW }} kWp</span>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="info-card">
      <mat-card-header>
        <mat-icon mat-card-avatar>settings_ethernet</mat-icon>
        <mat-card-title>Serial Config</mat-card-title>
        <mat-card-subtitle>Tổng quan cấu hình cổng</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div class="info-row">
          <span class="info-label">Số cổng đã cấu hình:</span>
          <span class="info-value">{{ serialPortCount }}</span>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="info-card">
      <mat-card-header>
        <mat-icon mat-card-avatar>solar_power</mat-icon>
        <mat-card-title>Inverter</mat-card-title>
        <mat-card-subtitle>Tổng quan hệ thống Inverter</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div class="info-row">
          <span class="info-label">Tổng số Inverter:</span>
          <span class="info-value">{{ inverterCount }} / {{ activeTier?.maxInverters || 'N/A' }}</span>
        </div>
        <div class="info-row">
          <span class="info-label">Tổng công suất:</span>
          <span class="info-value">{{ totalInverterPowerKW.toFixed(2) }} / {{ activeTier?.maxTotalPowerKW || 'N/A' }}
            kWp</span>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="info-card">
      <mat-card-header>
        <mat-icon mat-card-avatar>speed</mat-icon>
        <mat-card-title>Meter</mat-card-title>
        <mat-card-subtitle>Tổng quan hệ thống đo lường</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div class="info-row">
          <span class="info-label">Tổng số Meter:</span>
          <span class="info-value">{{ meterCount }}</span>
        </div>
        <div class="info-row">
          <span class="info-label">POI Meter:</span>
          <span class="info-value poi-value">{{ poiMeterAlias }}</span>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="info-card">
      <mat-card-header>
        <mat-icon mat-card-avatar>battery_full</mat-icon>
        <mat-card-title>Storage</mat-card-title>
        <mat-card-subtitle>Tổng quan hệ thống lưu trữ</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div class="info-row">
          <span class="info-label">Số thiết bị lưu trữ:</span>
          <span class="info-value">{{ storageCount }}</span>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
