<div class="page-container">
  <div class="page-header">
    <h1>Network Configuration</h1>
  </div>

  <div *ngIf="isLoading" class="loading-state">
    <mat-spinner diameter="50"></mat-spinner>
    <p>Loading Network Settings...</p>
  </div>

  <mat-tab-group animationDuration="0ms" *ngIf="!isLoading">
    <mat-tab label="Ethernet">
      <div class="tab-content ethernet-grid">
        <mat-card class="eth-card" *ngFor="let port of ports">
          <div *ngIf="!port.isEditing">
            <mat-card-header>
              <mat-card-title>{{ port.displayName }}</mat-card-title>
              <button mat-icon-button (click)="editPort(port)">
                <mat-icon>edit</mat-icon>
              </button>
            </mat-card-header>
            <mat-card-content class="eth-details">
              <div class="detail-item"><span>DHCP:</span> <strong>{{ port.isDhcp ? 'Enabled' : 'Disabled' }}</strong>
              </div>
              <div class="detail-item"><span>IP Address:</span> <strong>{{ port.ipAddress || 'N/A' }}</strong></div>
              <div class="detail-item"><span>Subnet Mask:</span> <strong>{{ port.subnetMask || 'N/A' }}</strong></div>
              <div class="detail-item"><span>Gateway:</span> <strong>{{ port.gateway || 'N/A' }}</strong></div>
            </mat-card-content>
          </div>

          <div *ngIf="port.isEditing" class="edit-mode">
            <mat-card-header>
              <mat-card-title>{{ port.displayName }} - Editing</mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <form [formGroup]="editForms[port.id]" (ngSubmit)="onSaveChanges(port.id)">
                <mat-slide-toggle formControlName="isDhcp" class="dhcp-toggle">Automatic (DHCP)</mat-slide-toggle>
                <div class="static-fields">
                  <mat-form-field appearance="outline">
                    <mat-label>IP Address</mat-label>
                    <input matInput formControlName="ipAddress">
                  </mat-form-field>
                  <mat-form-field appearance="outline">
                    <mat-label>Subnet Mask</mat-label>
                    <input matInput formControlName="subnetMask">
                  </mat-form-field>
                  <mat-form-field appearance="outline">
                    <mat-label>Gateway</mat-label>
                    <input matInput formControlName="gateway">
                  </mat-form-field>
                </div>
                <div class="action-buttons">
                  <button mat-stroked-button type="button" (click)="cancelEdit(port)">Cancel</button>
                  <button mat-flat-button color="primary" type="submit"
                          [disabled]="editForms[port.id].invalid || editForms[port.id].pristine">Save
                  </button>
                </div>
              </form>
            </mat-card-content>
          </div>
        </mat-card>
      </div>
    </mat-tab>

    <mat-tab label="4G">
      <div class="tab-content">
        <mat-card class="apn-card">
          <mat-card-title>4G Configuration</mat-card-title>
          <mat-card-content>
            <form [formGroup]="apnForm" (ngSubmit)="saveApn()">
              <mat-checkbox formControlName="enable" class="apn-enable">Enable 4G</mat-checkbox>
              <mat-form-field appearance="outline">
                <mat-label>APN</mat-label>
                <input matInput formControlName="apn">
              </mat-form-field>
              <mat-form-field appearance="outline">
                <mat-label>Username</mat-label>
                <input matInput formControlName="username">
              </mat-form-field>
              <mat-form-field appearance="outline">
                <mat-label>Password</mat-label>
                <input matInput formControlName="password" type="password">
              </mat-form-field>
              <mat-form-field appearance="outline">
                <mat-label>Server</mat-label>
                <input matInput formControlName="server">
              </mat-form-field>
              <div class="action-buttons">
                <button mat-flat-button color="primary" type="submit">Save</button>
              </div>
            </form>
          </mat-card-content>
        </mat-card>
      </div>
    </mat-tab>
  </mat-tab-group>
</div>
